{
    "task": "2f4aa9658408ac72a598363c6e22eadf93dbb8a7.txt",
    "provider": "anthropic",
    "model": "claude-haiku-4-5",
    "rounds": [
        {
            "code": "package main\n\nimport (\n\t\"fmt\"\n\t\"sync\"\n\t\"time\"\n)\n\ntype ProgressUpdate struct {\n\tID      string\n\tCurrent int\n\tTotal   int\n}\n\nfunc downloadSimulator(id string, total int, progressChan chan<- ProgressUpdate, wg *sync.WaitGroup) {\n\tdefer wg.Done()\n\n\tfor i := 0; i <= total; i++ {\n\t\tprogressChan <- ProgressUpdate{\n\t\t\tID:      id,\n\t\t\tCurrent: i,\n\t\t\tTotal:   total,\n\t\t}\n\t\ttime.Sleep(time.Millisecond * 5)\n\t}\n}\n\nfunc progressMonitor(progressChan <-chan ProgressUpdate, numDownloads int, doneChan chan<- bool) {\n\tfileProgress := make(map[string]int)\n\tfileTotals := make(map[string]int)\n\tlastPrintTime := make(map[string]time.Time)\n\tcompletedCount := 0\n\tmu := sync.Mutex{}\n\n\tfor update := range progressChan {\n\t\tmu.Lock()\n\n\t\tif fileTotals[update.ID] == 0 {\n\t\t\tfileTotals[update.ID] = update.Total\n\t\t\tfileProgress[update.ID] = 0\n\t\t}\n\n\t\tif update.Current < fileProgress[update.ID] {\n\t\t\tfmt.Printf(\"ERROR: File %s progress decreased from %d to %d\\n\", update.ID, fileProgress[update.ID], update.Current)\n\t\t\tmu.Unlock()\n\t\t\tcontinue\n\t\t}\n\n\t\toldProgress := fileProgress[update.ID]\n\t\tfileProgress[update.ID] = update.Current\n\n\t\tnow := time.Now()\n\t\tif now.Sub(lastPrintTime[update.ID]) > 100*time.Millisecond || update.Current == update.Total {\n\t\t\tfmt.Printf(\"File %s: progress %d/%d\\n\", update.ID, update.Current, update.Total)\n\t\t\tlastPrintTime[update.ID] = now\n\t\t}\n\n\t\tif oldProgress < update.Total && update.Current == update.Total {\n\t\t\tcompletedCount++\n\t\t\tif completedCount == numDownloads {\n\t\t\t\tmu.Unlock()\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tmu.Unlock()\n\t}\n\n\tmu.Lock()\n\tfmt.Println(\"\\nAll downloads completed successfully\")\n\tfmt.Println(\"Final state:\")\n\tfor i := 0; i < numDownloads; i++ {\n\t\tid := fmt.Sprintf(\"File%d\", i)\n\t\tfmt.Printf(\"  %s: %d/%d\\n\", id, fileProgress[id], fileTotals[id])\n\t}\n\tmu.Unlock()\n\n\tdoneChan <- true\n}\n\nfunc main() {\n\tfmt.Println(\"Starting downloads...\")\n\n\tprogressChan := make(chan ProgressUpdate, 100)\n\tdoneChan := make(chan bool)\n\tvar wg sync.WaitGroup\n\n\tnumDownloads := 3\n\ttotalSize := 100\n\n\tfor i := 0; i < numDownloads; i++ {\n\t\twg.Add(1)\n\t\tid := fmt.Sprintf(\"File%d\", i)\n\t\tgo downloadSimulator(id, totalSize, progressChan, &wg)\n\t}\n\n\tgo progressMonitor(progressChan, numDownloads, doneChan)\n\n\tgo func() {\n\t\twg.Wait()\n\t\tclose(progressChan)\n\t}()\n\n\t<-doneChan\n}",
            "passed": true,
            "errors": []
        }
    ],
    "passed": true
}